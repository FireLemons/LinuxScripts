#!/bin/bash
# Quick setup for a fresh linux install

# run "who" if you don't remember who the main user is me
USER=flysy

# Check if running as sudo

if [ "$EUID" -ne 0 ]
  then echo "ERROR: Not run with sudo"
  exit 1
fi

# Add /usr/local/bin to PATH
sudo -u $USER PATH=$PATH:/usr/local/bin

# update existing packages
apt update
apt upgrade

# Remove bloat packages
# Remove email manager
apt purge thunderbird*
apt autoremove

# Install wanted packages
# Install external drive format support
apt install exfat-fuse exfat-utils

# Install file archivers
apt install p7zip-full

# Install cURL
apt install curl

# Install Macchanger
apt install macchanger

# Install git
apt install git

# Install vim
apt install vim
#   Install youcompleteme dependencies
apt install build-essential cmake vim python3-dev
# Install Vundle for youcompleteme
sudo -u $USER git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

# Install video utilities
# Some decoders
apt install ubuntu-restricted-extras

apt install ffmpeg
curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl

apt install ffmpegthumbnailer

# Install Chromium
apt install chromium-browser

# Install Node
curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
apt install -y nodejs

# Install Wine
# Fetch wine authentication key
sudo -u $USER wget -nc https://dl.winehq.org/wine-builds/winehq.key

# Enable 32 bit architecture if not yet enabled
dpkg --add-architecture i386 
# Install key to authenticate wine installation
apt-key add winehq.key
# Main Installation
apt update

# WARNING "focal" describes wine for Ubuntu 20.04. For different versions check https://wiki.winehq.org/Ubuntu for the correct keyword
add-apt-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main'
apt install --install-recommends winehq-stable
echo "please run winecfg"

# Install sl
apt install sl
sl
